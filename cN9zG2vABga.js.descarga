if (self.CavalryLogger) { CavalryLogger.start_js(["CJ0XY"]); }

__d("MLogoutClearCache",["MCache","Stratcom"],(function a(b,c,d,e,f,g,h,i){i.listen("click","logout",h.clear)}),null);
__d("KaiOSSendMessageUtil",[],(function a(b,c,d,e,f,g){"use strict";__p&&__p();var h={Type:Object.freeze({CONSOLE_LOG:"console_log",HANDLE_BACK:"handle_back",MESSAGE_RECEIVED:"received",OPEN_URL:"open_url",REGISTER_PUSH:"register_push",SCREEN_ORIENTATION_LOCK:"screen_orientation_lock",UNREGISTER_PUSH:"unregister_push",CHECK_FOR_PUSH_UPDATE:"check_for_push_update",PUSH_UPDATE_COMPLETED:"push_update_completed",SET_VOLUME:"set_volume",FBT_STRINGS:"fbt_strings"}),Action:"action",ActionPayload:"payload",CallbackID:"callback_id",postMessage:function i(j,k,l,m){if(j&&k){var n=new Map();n.set(h.Action,k);if(l)n.set(h.ActionPayload,l);if(m)n.set(h.CallbackID,m);j.postMessage(n,"*")}}};f.exports=h}),null);
__d("KaiOSFullscreenVideoHandler",["getActiveElement","KaiOSSendMessageUtil"],(function a(b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=Object.freeze({RIGHT:6,LEFT:4,UP:2,DOWN:8,MIDDLE:5}),k=Object.freeze({KEY:"type",DOWN:-1,UP:1});function l(m){this.hostWindow=m}l.prototype.handleKeyDownEvent=function(event){__p&&__p();var m=this.getVideoIfFullScreen();if(!m)return false;if(event.key==="SoftLeft"){document.exitFullscreen();return true}else if(event.key==="SoftRight"){m.muted=!m.muted;return true}return false};l.prototype.handleClickEvent=function(event){var m=this.getVideoIfFullScreen();if(!m)return false;this.togglePause(m);return true};l.prototype.handleMouseMoveEvent=function(event){return false};l.prototype.getVideoIfFullScreen=function(){if(document.fullscreenElement&&document.fullscreenElement.nodeName&&document.fullscreenElement.nodeName=="VIDEO")return h();return null};l.prototype.seek=function(m,n){if(n)m.currentTime=Math.min(m.duration,m.currentTime+10);else m.currentTime=Math.max(0,m.currentTime-10)};l.prototype.togglePause=function(m){if(m.paused)m.play();else m.pause()};l.prototype.volume=function(m){if(!m||m!=k.UP&&m!=k.DOWN)return;var n=new Map();n.set(k.KEY,m.toString());i.postMessage(this.hostWindow,i.Type.SET_VOLUME,n)};l.prototype.control=function(m,n){__p&&__p();if(n)switch(n){case j.UP:this.volume(k.UP);break;case j.DOWN:this.volume(k.DOWN);break;case j.LEFT:this.seek(m,false);break;case j.RIGHT:this.seek(m,true);break;case j.MIDDLE:this.togglePause(m);break}};f.exports=l}),null);
__d("MRegMultiStepConstants",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BACK_BUTTON:"reg_back_button",FORM:"multi_step_form",LEGAL_TEXT:"legal_text",SUBMIT:"multi_step_submit",NEXT:"multi_step_next",HIDDEN:"hidden_elem",WRAPPER:"multi_step_input_wrapper",DISPLAYED_STEP:"multi_step_displayed_step",FOCUS_ME:"focus_me",PROGRESS_BAR_STEP:"progress_bar_step",LANGUAGE_SELECTOR:"multi_step_language_selector",PASSWORD:"multi_step_password",SAVE_PASSWORD:"multi_step_save_password",SKIP_PASSWORD:"multi_step_skip_password",SKIP_PASSWORD_INPUT:"multi_step_skip_password_input",SKIP_PW_GO_BACK:"multi_step_skip_pw_go_back",SKIP_PW_SIGN_UP:"multi_step_skip_pw_sign_up",REG_IMPRESSION_ID:"reg_impression_id",STEP_TITLE_TEXT:"step_title_text",CP_TITLE:"contactpoint_step_title",CP_INPUT:"contactpoint_step_input",CP_INPUT_LABEL:"contactpoint_step_input_label",CP_TYPE_TOGGLE_UNIT:"contactpoint_type_toggle_unit",SWITCH_PHONE_TO_EMAIL:"switch_phone_to_email",SWITCH_EMAIL_TO_PHONE:"switch_email_to_phone",CHANGE_LANGUAGE:"change_language",DEFAULT_LANGUAGE:"default_language",DISMISS_NO_INTERNET_DIALOG:"dismiss_no_internet_dialog",NUM_SUBMITS:"num_submits",LOGIN_LINK:"login_link"})}),null);
__d("XKaiOSAppJioTagController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/kaiosapp/jio/tag/",{})}),null);
__d("XKaiOSUpdatePushController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/kaiosapp/push/update/",{})}),null);
__d("KaiOSController",["Promise","MRequest","MViewport","Stratcom","URI","XKaiOSUpdatePushController","getActiveElement","isLinkshimURI","KaiOSSendMessageUtil","KaiOSFullscreenVideoHandler","MRegMultiStepConstants","XKaiOSAppJioTagController"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){"use strict";__p&&__p();var t="app://m.facebook.com",u=Object.freeze({APP_INFO:"app_info",UPDATE_PUSH:"update_push"}),v=new Map(),w=null,x=null,y=new h(function(N,O){x=N}),z=0,A=null,B=false,C=false,D=void 0,E=false;function F(N){__p&&__p();if(!(N instanceof Map))return;var O=N.get(p.Action),P=N.get(p.ActionPayload),Q=N.get(p.CallbackID);if(Q){var R=v.get(Q);if(R){v["delete"](Q);R(P)}return}switch(O){case u.APP_INFO:if(P&&P.get){M.appVersion=P.get("app_version");M.setup()}break;case u.UPDATE_PUSH:if(P&&P.get){var S=P.get("subscription");M.updatePush(S.endpoint,JSON.stringify(S.keys))}}}function G(N){__p&&__p();if(D&&D.handleClickEvent(N)){N.preventDefault();N.stopPropagation();return}var O=N.target,P=null;if(O&&O.tagName==="A")P=O.href;else if(O&&O.parentElement&&O.parentElement.tagName==="A")P=O.parentElement.href;else if(O&&O.parentElement&&O.parentElement.parentElement&&O.parentElement.parentElement.tagName==="A")P=O.parentElement.parentElement.href;var Q=new l(P),R=P!=null&&P!==""&&!/\.facebook.com$/i.test(Q.getDomain());if(P!=null&&(o(Q)||R)){M.openUrl(P);N.preventDefault();N.stopPropagation()}}function H(N){__p&&__p();if(!C||N!="Backspace"&&N!="BrowserBack")return false;var O=location.pathname.split("/"),P=O.length>=2&&O[1]==="reg";if(!P)return false;var Q=document.getElementById(r.BACK_BUTTON);if(Q&&Q.offsetHeight>0){Q.click();return true}return false}function I(){var N=location.href.split("/");return N.length==4&&(N[3]===""||N[3][0]==="?"||N[3].startsWith("home.php")||N[3].startsWith("index.php")||N[3].startsWith("confirmemail.php"))}function J(event){if(D&&D.handleMouseMoveEvent(event)){event.preventDefault();event.stopPropagation()}}function K(event){__p&&__p();if(D&&D.handleKeyDownEvent(event)){event.preventDefault();event.stopPropagation();return}switch(event.key){case"Backspace":case"BrowserBack":if(document.fullscreenElement){document.exitFullscreen();event.preventDefault();event.stopPropagation()}else if(H(event.key)){event.preventDefault();event.stopPropagation()}else if(I()&&j.getScrollTop()>5){j.scrollTo(0,0);event.preventDefault();event.stopPropagation()}else if(!I()){p.postMessage(w,p.Type.HANDLE_BACK);event.preventDefault();event.stopPropagation()}break;case"Enter":if(M.appVersion!=null&&event.target.type=="textarea"){event.target.blur();event.preventDefault();event.stopPropagation()}}}function L(event){__p&&__p();if(document.fullscreenElement){if(document.fullscreenElement.nodeName=="VIDEO"){if(screen.orientation)screen.orientation.lock("landscape");document.fullscreenElement.mozRequestPointerLock()}}else{var N=new Map();N.set("orientation","portrait");p.postMessage(w,p.Type.SCREEN_ORIENTATION_LOCK,N)}}var M={appVersion:null,init:function N(O){z=O.get("app_id");A=O.get("fbt_strings");B=!!O.get("open_links_in_app");C=!!O.get("back_button_on_reg_page");window.addEventListener("message",M.receiveMessage,false)},setup:function N(){__p&&__p();if(B)window.addEventListener("click",G,true);window.addEventListener("keydown",K,false);window.addEventListener("mousemove",J,true);if(M.appVersion!=null)window.addEventListener("fullscreenchange",L,false);k.listen("click",["m-composer","composer-submit"],function(P){setTimeout(function(){var Q=n();if(Q==P.getNode("composer-submit"))Q.blur()},100)});p.postMessage(w,p.Type.CHECK_FOR_PUSH_UPDATE);if(A!==null&&A!==undefined){var O=new Map();O.set("fbt_strings",A);p.postMessage(w,p.Type.FBT_STRINGS,O)}},maybeTagMeAsKaiOSApp:function N(){if(w!=null)M.tagMeAsKaiOSApp();else E=true},tagMeAsKaiOSApp:function N(){var O=s.getURIBuilder().getURI(),P=new i(O).setMethod("post").setData({is_kaios_app:true});E=false;P.send()},consoleLog:function N(O){var P=new Map();P.set("msg",O);p.postMessage(w,p.Type.CONSOLE_LOG,P)},waitForKaiOS:function N(){return y},registerPush:function N(O){var P=Math.random().toString();v.set(P,O);p.postMessage(w,p.Type.REGISTER_PUSH,null,P)},unregisterPush:function N(){M.waitForKaiOS().done(function(){p.postMessage(w,p.Type.UNREGISTER_PUSH)})},updatePush:function N(O,P){var Q=m.getURIBuilder().getURI(),R=new i(Q).setMethod("post").setData({push_endpoint:O,app_id:z,subscription_keys:P});R.listen("done",function(S){if(S.payload&&S.payload.success)p.postMessage(w,p.Type.PUSH_UPDATE_COMPLETED)});R.send()},openUrl:function N(O){var P=new Map();P.set("url",O);p.postMessage(w,p.Type.OPEN_URL,P)},receiveMessage:function N(event){__p&&__p();if(!event||t!=event.origin||!event.source)return;if(x){x();x=null}if(!w){w=event.source;D=new q(w);p.postMessage(w,p.Type.MESSAGE_RECEIVED)}if(event.data)F(event.data);if(E)M.tagMeAsKaiOSApp()}};f.exports=M}),null);
__d("BrowserPrefillSource",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BROWSER_DROPDOWN:"browser_dropdown",BROWSER_ONLOAD:"browser_onload",SERVER_PREFILL:"server_prefill",ATTEMPT_USER:"attempt_user",EMAIL_NOTIFICATION:"email_notification",HEADER:"header",IDENTIFIED_USER:"identified_user",LAST_LOGIN:"last_login",MOBILE_SUBNO_KEY:"mobile_subno_key",PROVIDED_OR_SOFT_MATCHED:"provided_or_soft_matched",TYPO_CORRECTED:"typo_corrected"})}),null);
__d("BrowserPrefillType",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CONTACT_POINT:"contact_point",PASSWORD:"password"})}),null);
__d("DamerauLevenshtein",[],(function a(b,c,d,e,f,g){__p&&__p();var h={DamerauLevenshteinDistance:function i(j,k){__p&&__p();if(j.length===0)return k.length;if(k.length===0)return j.length;if(j===k)return 0;var l,m,n=[];n[0]=[];n[1]=[];n[2]=[];for(m=0;m<=k.length;m++)n[0][m]=m;for(l=1;l<=j.length;l++)for(m=1;m<=k.length;m++){n[l%3][0]=l;var o=j.charAt(l-1)===k.charAt(m-1)?0:1;n[l%3][m]=Math.min(n[(l-1)%3][m]+1,n[l%3][m-1]+1,n[(l-1)%3][m-1]+o);if(l>1&&m>1&&j.charAt(l-1)==k.charAt(m-2)&&j.charAt(l-2)==k.charAt(m-1))n[l%3][m]=Math.min(n[l%3][m],n[(l-2)%3][m-2]+o)}return n[j.length%3][k.length]}};f.exports=h}),null);
__d("LoginEvent",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({LOGIN_FAILURE:"login_failure",LOGIN_SUCCESS:"login_success",SESSION_TERMINATION:"session_termination",SESSION_UPDATE:"session_update",SESSION_VALIDATION:"session_validation",CHANGED_USER_IDENTIFIER:"changed_user_identifier",CLICKED_NEXT:"clicked_next",CLICKED_NEXT_USER_IDENTIFIER_BLANK:"clicked_next_user_identifier_blank",CLICKED_NEXT_USER_IDENTIFIER_FILLED:"clicked_next_user_identifier_filled",PASSWORD_ENTRY_VIEWED:"password_entry_viewed",CHANGED_PASSWORD:"changed_password",CLICKED_BACK:"clicked_back",CLICKED_SUBMIT:"clicked_submit",CLICKED_SUBMIT_PASSWORD_BLANK:"clicked_submit_password_blank",CLICKED_SUBMIT_PASSWORD_FILLED:"clicked_submit_password_filled",FORM_LOAD_CLIENT:"form_load_client",FORM_LOAD:"form_load",FORM_FOCUS:"form_focus",CLICKED_REG_IDENTIFIER_BLANK:"clicked_reg_identifier_blank",CLICKED_REG_IDENTIFIER_FILLED:"clicked_reg_identifier_filled",BROWSER_AUTOCOMPLETE:"browser_autocomplete",INVALID_CONTACTPOINT:"invalid_contactpoint",VALID_CONTACTPOINT:"valid_contactpoint",SHOWN_OTP_LINK:"shown_otp_link",CLICKED_OTP_LINK:"clicked_otp_link",CLICKED_NOT_YOU:"clicked_not_you"})}),null);
__d("LoginFormKeys",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({BUTTON_KEY:"loginbutton",CUID:"cuid",EMAIL_FIELD_CONTAINER:"email_container",EMAIL_FIELD_KEY:"email",ERROR_BOX_KEY:"error_box",HEADER_BLOCK:"header_block",LOGIN_LINK:"login_link",NOT_ME_LINK:"not_me_link",PASSWORD_FIELD_KEY:"pass",PREFILL_CONTACT_POINT:"prefill_contact_point",PREFILL_SOURCE:"prefill_source",PREFILL_TYPE:"prefill_type",EMAIL_INPUT_CONTAINER:"email_input_container",FIRST_PREFILL_SOURCE:"first_prefill_source",FIRST_PREFILL_TYPE:"first_prefill_type",HAD_CP_PREFILLED:"had_cp_prefilled",HAD_PASSWORD_PREFILLED:"had_password_prefilled",AUTH_STEP_CP_DISPLAY:"step_two_cp_display",EMAIL_COMPONENTS_WRAPPER:"email_components_wrapper",PASSWORD_COMPONENTS_WRAPPER:"password_component_wrapper"})}),null);
__d("BrowserPrefillLogging",["BanzaiLogger","BrowserPrefillSource","BrowserPrefillType","DamerauLevenshtein","LoginEvent","LoginFormKeys","ge"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){"use strict";__p&&__p();var o={initContactpointFieldLogging:function p(q){this.contactpointFieldID=q.contactpointFieldID;this._updateContactpoint();this.serverPrefillContactpoint=q.serverPrefill;var r=n(this.contactpointFieldID);if(r==null)return;r.addEventListener("input",this._mayLogContactpointPrefillViaDropdown.bind(this));window.addEventListener("load",this._mayLogContactpointPrefillOnload.bind(this));return},registerCallback:function p(q){this.regeisteredCallbacks=this.regeisteredCallbacks||[];this.regeisteredCallbacks.push(q)},_invokeCallbacks:function p(q,r){if(this.regeisteredCallbacks==null||this.regeisteredCallbacks.size===0)return;this.regeisteredCallbacks.forEach(function(s){s(q,r)})},initPasswordFieldLogging:function p(q){this.passwordFieldID=q.passwordFieldID;this._updatePassword();var r=n(this.passwordFieldID);if(r==null)return;r.addEventListener("input",this._mayLogPasswordPrefillViaDropdown.bind(this));window.addEventListener("load",this._mayLogPasswordPrefillOnload.bind(this))},updatePrefill:function p(q,r,s){__p&&__p();var t=n(m.PREFILL_SOURCE),u=n(m.PREFILL_TYPE),v=n(m.FIRST_PREFILL_SOURCE),w=n(m.FIRST_PREFILL_TYPE),x=n(m.HAD_CP_PREFILLED),y=n(m.HAD_PASSWORD_PREFILLED),z=n(m.PREFILL_CONTACT_POINT);if(t!=null)t.value=r;if(u!=null)u.value=s;if(z!=null&&q!=null)z.value=q;if(w!=null&&(w.value==null||w.value==""))w.value=s;if(v!=null&&(v.value==null||v.value==""))v.value=r;if(x!=null&&(x.value==null||x.value==="false")&&s===j.CONTACT_POINT)x.value="true";if(y!=null&&(y.value==null||y.value==="false")&&s===j.PASSWORD)y.value="true"},_mayLogContactpointPrefillOnload:function p(){this._updateContactpoint();if(this.previousContactpoint==null||this.previousContactpoint==="")return;var q=this.previousContactpoint===this.serverPrefillContactpoint?i.SERVER_PREFILL:i.BROWSER_ONLOAD;this._logBrowserPrefill(q,j.CONTACT_POINT);this._invokeCallbacks(q,j.CONTACT_POINT)},_mayLogPasswordPrefillOnload:function p(){this._updatePassword();if(this.previousPassword==null||this.previousPassword==="")return;this._logBrowserPrefill(i.BROWSER_ONLOAD,j.PASSWORD);this._invokeCallbacks(i.BROWSER_ONLOAD,j.PASSWORD)},_mayLogContactpointPrefillViaDropdown:function p(){__p&&__p();var q=n(this.contactpointFieldID);if(q==null||q.value==null)return;if(this._isBrowserPrefill(this.previousContactpoint,q.value)===false){this._updateContactpoint();return}this._updateContactpoint();this._logBrowserPrefill(i.BROWSER_DROPDOWN,j.CONTACT_POINT);this._invokeCallbacks(i.BROWSER_DROPDOWN,j.CONTACT_POINT)},_mayLogPasswordPrefillViaDropdown:function p(){__p&&__p();var q=n(this.passwordFieldID);if(q==null||q.value==null)return;if(this._isBrowserPrefill(this.previousPassword,q.value)===false){this._updatePassword();return}this._updatePassword();this._logBrowserPrefill(i.BROWSER_DROPDOWN,j.PASSWORD);this._invokeCallbacks(i.BROWSER_DROPDOWN,j.PASSWORD)},_isBrowserPrefill:function p(q,r){__p&&__p();if(r==="")return false;if(r===q)return false;if(r.length===1||q.length===r.length+1||r.length===q.length+1)return false;var s=k.DamerauLevenshteinDistance(r,q);if(s===q.length-r.length)return false;return true},_updateContactpoint:function p(){var q=n(this.contactpointFieldID);this.previousContactpoint=q!=null&&q.value!=null?q.value:""},_updatePassword:function p(){var q=n(this.passwordFieldID);this.previousPassword=q!=null&&q.value!=null?q.value:""},_logBrowserPrefill:function p(q,r){var s=null;if(r===j.CONTACT_POINT)s=this.previousContactpoint;if(q!==i.SERVER_PREFILL)this.updatePrefill(s,q,r);h.create({signal:true}).log("LoginEventsLoggerConfig",{event:l.BROWSER_AUTOCOMPLETE,prefill_contact_point:s,prefill_source:q,prefill_type:r})}};f.exports=o}),null);
__d("MButton",["CSSCore","DOM","cx","invariant"],(function a(b,c,d,e,f,g,h,i,j,k){__p&&__p();var l="_2347";function m(o){i.isType(o,"button")||i.isType(o,"a")||k(0)}var n={isEnabled:function o(p){m(p);return p.disabled===false||i.isType(p,"a")&&!h.hasClass(p,l)},setEnabled:function o(p,q){__p&&__p();m(p);if(n.isEnabled(p)===q)return;if(i.isType(p,"button"))p.disabled=!q;else{h.conditionClass(p,l,!q);if(q){p.removeAttribute("tabindex");p.removeAttribute("aria-disabled")}else{p.setAttribute("tabindex","-1");p.setAttribute("aria-disabled","true")}}}};f.exports=n}),null);
__d("MLoginFormError",["CSS","DOM","Stratcom","cx","invariant"],(function a(b,c,d,e,f,g,h,i,j,k,l){"use strict";__p&&__p();var m="_3qsy",n="_3qs-",o={set:function p(q,r){r!==null||l(0);h.addClass(q,m);h.addClass(q,n);i.listen(q,"input",null,function(s){h.removeClass(q,n)})},unset:function p(q){h.removeClass(q,m);h.removeClass(q,n)}};f.exports=o}),null);
__d("MLoginFormSigils",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({FORM:"m_login_form",BUTTON:"m_login_button",BUTTON_ALT:"m_login_button_alt",NOTICE:"m_login_notice",UPSELL:"m_login_upsell",EMAIL_INPUT:"m_login_email",PASSWORD_INPUT:"m_login_password",TRY_NUMBER:"m_login_try_number",UNRECOGNIZED_TRIES_COUNT:"m_login_unrecognized_tries",MORE_LINKS:"m_login_more_links",NEXT_BUTTON:"m_login_next_btn",CP_TEXT:"m_login_cp_text",LANGUAGE_SELECTOR:"language_selector",LOGIN_IDENTIFY_STEP_ELEMENT:"login_identify_step_element",LOGIN_IDENTIFY_STEP_PROGRESS_BAR:"login_identify_step_progress_bar",LOGIN_PASSWORD_STEP_ELEMENT:"login_password_step_element",CHANGE_CP_LINK:"m_login_change_cp_link",REG_BUTTON:"m_reg_button",CONTACTPOINT_EXISTS:"contactpoint_exists",RECOGNIZED_USER_NAME_HOLDER:"m_recognized_user_name",PROFILE_PIC_ELEM:"profile_pic_elem",CONTACTPOINT_DISPLAY_LABEL:"contactpoint_display_label",CHANGE_NOTICE_BACKGROUND:"change_notice_background",ONE_TIME_PASSWORD_LINK:"one_time_password_link",PASSWORD_FIELD_LABEL:"password_field_label"})}),null);
__d("MPasswordPlainTextToggleSigils",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({INPUT:"password-plain-text-toggle-input",TOGGLE:"password-plain-text-toggle"})}),null);
__d("XLoginCheckContactpointController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/login/v/",{contactpoint:{type:"String",required:true}})}),null);
__d("XLoginProfileInfoFetcherController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/login/pp/",{contactpoint:{type:"String"}})}),null);
__d("MLoginController",["BanzaiLogger","BrowserPrefillSource","BrowserPrefillType","BrowserPrefillLogging","CSS","cx","DataStore","DOM","DeferredCookie","fbt","ge","goURI","LoginFormKeys","MAjaxify","MAnimator","MButton","MHistory","MLoginFormError","MLoginFormSigils","MPasswordPlainTextToggleSigils","MRequest","MViewport","Keys","Stratcom","SubscriptionsHandler","XLoginCheckContactpointController","XLoginProfileInfoFetcherController","URI"],(function a(b,c,d,e,f,g,h,i,aa,ba,j,ca,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F){"use strict";__p&&__p();var G="_pg8",H="stepOneIdentification",I="stepTwoAuthenticaiton",J="auth",da="reduce_redundant_work_universe",K=500,L=5,M={_initTwoStepsListeners:function N(){__p&&__p();var O=new C();O.addSubscriptions(B.listen("click",w.CHANGE_CP_LINK,function(event){event.prevent();this._logAction("clicked_not_you");if(this.shouldEnableEditableCPDesign)this._showEditableCPFieldOnAuthStep();else if(history.length>1)history.go(-1)}.bind(this)),B.listen("m:history:change",null,function(event){__p&&__p();var P=event.getData();if(P.path){var Q=new F(P.path);if(this._initialURI.getPath()===Q.getPath()){event.prevent();if(event.getData().soft===J)this._onEnteringCP();else this._onBackToCP()}}}.bind(this)),B.listen("click",w.NEXT_BUTTON,this._handleNextButtonClick.bind(this)));B.listen("m:page:unload",null,function(){B.removeCurrentListener();O.release()})},initRegButton:function N(O){var P=O.root;this.regURI=O.regURI;this.regButton=l.find(P,"a",w.REG_BUTTON);this.regButton.removeAttribute("href");l.listen(this.regButton,"click",null,this._sendLoginRequestFromReg.bind(this))},initLoginForm:function N(O){__p&&__p();this.root=O.root;this.isTwoStepsLogin=O.isTwoStepsLogin;this.isActionLoggingEnabled=O.isActionLoggingEnabled;this.loginForm=l.find(this.root,"form",w.FORM);this.loginForm.action=O.ajaxURI;this.loginButton=l.find(this.root,"button",w.BUTTON);var P=l.scry(this.root,"a",w.BUTTON_ALT);P=P.pop();this.loginButtonAlt=null;if(P!==undefined)this.loginButtonAlt=P;if(this.isTwoStepsLogin){this.hadCPPrefilled=false;this.shouldClearPasswordIfOnlyPasswordPrefilled=true;this._initialURI=F.getRequestURI();this.onErrorRegURI=O.onErrorRegURI;this.isEarlyCPCheckEnabled=O.isEarlyCPCheckEnabled;this.shouldAutoLandOnStep2=O.shouldAutoLandOnStep2;this.prefillContactpointHiddenInput=o(q.PREFILL_CONTACT_POINT);this.emailComponentsWrapper=o(q.EMAIL_COMPONENTS_WRAPPER);this.passwordComponentWrapper=o(q.PASSWORD_COMPONENTS_WRAPPER);this.stepTwoCPDisplayContainer=o(q.AUTH_STEP_CP_DISPLAY);this.shouldEnableOneTimePassword=O.shouldEnableOneTimePassword;this.passwordStepDelayMilliSeconds=O.passwordStepDelayMilliSeconds;this.shouldEnableScrollToError=O.shouldEnableScrollToError;this.shouldEnableInlineError=O.shouldEnableInlineError;this.shouldEnableEditableCPDesign=O.shouldEnableEditableCPDesign;this.shouldCallServerOnEmptyCP=O.shouldCallServerOnEmptyCP;this.nextButton=l.find(this.root,"button",w.NEXT_BUTTON);this.cpText=l.scry(this.root,"span",w.CP_TEXT).pop();this.cpDisplayLabel=l.scry(this.root,"span",w.CONTACTPOINT_DISPLAY_LABEL).pop();this.passwordFieldLabel=l.scry(this.root,"span",w.PASSWORD_FIELD_LABEL).pop();this.profilePicElem=l.scry(this.root,"*",w.PROFILE_PIC_ELEM).pop();this.oneTimePasswordLink=l.scry(this.root,"a",w.ONE_TIME_PASSWORD_LINK).pop();this.userName=l.scry(this.root,"span",w.RECOGNIZED_USER_NAME_HOLDER).pop();this.moreLinks=l.scry(this.root,"div",w.MORE_LINKS).pop();this.progressBar=l.find(this.root.ownerDocument,"div",w.LOGIN_IDENTIFY_STEP_PROGRESS_BAR);this.languageSelector=l.find(this.root.ownerDocument,"div",w.LANGUAGE_SELECTOR);this.identifyStepElements=l.scry(this.root.ownerDocument,"div",w.LOGIN_IDENTIFY_STEP_ELEMENT);this.identifyStepElements.push(this.languageSelector);this.passwordStepElements=l.scry(this.root.ownerDocument,"div",w.LOGIN_PASSWORD_STEP_ELEMENT);this._initTwoStepsListeners();k.set(this.loginForm,"step",H)}this.loginButton.type="button";this.notice=l.find(this.root,"div",w.NOTICE);this.emailInput=this._getElem("input",w.EMAIL_INPUT);this.passwordInput=this._getElem("div",w.PASSWORD_INPUT);this.emailInputContainer=o(q.EMAIL_INPUT_CONTAINER);this.passwordInputDOM=l.find(this.passwordInput,"input");this.tryNumber=this._getElem("input",w.TRY_NUMBER);this.unrecognizedTriesCountInput=this._getElem("input",w.UNRECOGNIZED_TRIES_COUNT);this.upsell=this._getElem("div",w.UPSELL);this.numPasswordErrorAttempts=0;this.unrecognizedContactpointErrorCount=0;this.rapidFeedbackUri=O.rapidFeedbackUri;l.listen(this.loginButton,"click",null,this._handleSubmitButtonClick.bind(this));if(this.loginButtonAlt!==null)l.listen(this.loginButtonAlt,"click",null,this._handleSubmitButtonClick.bind(this));var Q=O.listenKeyDown?"keydown":"keyup";if(this.isTwoStepsLogin){this.nextButton.setAttribute("type","button");this.passwordInputDOM.setAttribute("tabindex",-1);l.listen(this.loginForm,"keydown",null,function(S){if(S.getRawEvent().keyCode===A.RETURN)if(k.get(this.loginForm,"step","")===H)this._handleNextButtonClick();else this._handleSubmitButtonClick()}.bind(this))}else l.listen(this.loginForm,Q,null,function(S){if(S.getRawEvent().keyCode===A.RETURN)this._handleSubmitButtonClick()}.bind(this));if(O.clearOnDelete)l.listen(this.emailInput,Q,null,function(S){if(S.getRawEvent().keyCode===A.BACKSPACE)this.emailInput.value=""}.bind(this));if(this.isActionLoggingEnabled){B.listen("change",w.EMAIL_INPUT,function(S){this._logAction("changed_user_identifier")}.bind(this));B.listen("change",w.PASSWORD_INPUT,function(S){this._logAction("changed_password")}.bind(this));B.listen("click",w.REG_BUTTON,function(S){if(this.emailInput.value==="")this._logAction("clicked_reg_identifier_blank");else this._logAction("clicked_reg_identifier_filled")}.bind(this));this.hasFocusedAlready=false;window.addEventListener("load",function(S){this._logAction("form_load_client")}.bind(this),false);var R=l.scry(this.root,"input",null);R.forEach(function(S){l.listen(S,"focus",null,this._logFormFocus.bind(this))}.bind(this))}if(this.shouldAutoLandOnStep2&&this.emailInput.value.trim()!==""){this.hadCPPrefilled=true;u.pushSoftState(J)}},_logFormFocus:function N(){if(this.hasFocusedAlready)return;this.hasFocusedAlready=true;this._logAction("form_focus")},_getElem:function N(O,P){var Q=l.scry(this.root,O,P);if(Q.length===0)return null;return Q[0]},_maybeScrollToError:function N(){if(this.shouldEnableScrollToError)this._animateScrollToElem(this.notice);if(this.shouldEnableInlineError)this._animateScrollToElem(this.passwordFieldLabel)},_animateScrollToElem:function N(O){if(!O)return;var P=z.getScrollPos().y,Q=O.offsetTop,R=function R(S){z.scrollTo(0,P+S*(Q-P-L))};new s().start(R,null,function(){},K)},_autoFocusIfNeeded:function N(O){__p&&__p();if(!this.emailInput||!this.passwordInput)return;if(!this.passwordInputDOM)return;var P=this.emailInput.value===""||O[w.EMAIL_INPUT].error,Q=this.passwordInputDOM.value===""||O[w.PASSWORD_INPUT].error;if(P||Q)if(P)this.emailInput.focus();else if(Q){this.passwordInputDOM.focus();this._maybeScrollToError()}},_sendLoginRequest:function N(){__p&&__p();m.flushAllCookies();j.hide(this.notice);t.setEnabled(this.loginButton,false);if(this.isTwoStepsLogin)t.setEnabled(this.nextButton,false);setTimeout(t.setEnabled.bind(null,this.loginButton,true),15e3);if(this.loginButtonAlt!==null){t.setEnabled(this.loginButtonAlt,false);setTimeout(t.setEnabled.bind(null,this.loginButtonAlt,true),15e3)}if(this.tryNumber!==null)this.tryNumber.setAttribute("value",this.numPasswordErrorAttempts);if(this.unrecognizedTriesCountInput!==null)this.unrecognizedTriesCountInput.value=this.unrecognizedContactpointErrorCount;r.form(null,this.loginForm,null,"nocache",null,true,[{response:this._onLoginResponse.bind(this)}])},_sendLoginRequestFromReg:function N(){__p&&__p();m.flushAllCookies();if(this.emailInput.value===""||this.passwordInput.value===""){p(this.regURI);return}j.hide(this.notice);t.setEnabled(this.loginButton,false);setTimeout(t.setEnabled.bind(null,this.loginButton,true),15e3);if(this.loginButtonAlt!==null){t.setEnabled(this.loginButtonAlt,false);setTimeout(t.setEnabled.bind(null,this.loginButtonAlt,true),15e3)}r.form(null,this.loginForm,null,"nocache",null,true,[{response:this._onLoginFromRegResponse.bind(this)}])},_logActionIfEnabled:function N(O){if(this.isActionLoggingEnabled)this._logAction(O)},_logAction:function N(O){__p&&__p();var P=o(q.FIRST_PREFILL_TYPE),Q=null;if(P!=null&&P.value!=="")Q=P.value;var R=o(q.FIRST_PREFILL_SOURCE),S=null;if(R!=null&&R.value!=="")S=R.value;var T=o(q.PREFILL_TYPE),U=null;if(T!=null&&T.value!=="")U=T.value;var V=o(q.PREFILL_SOURCE),W=null;if(V!=null&&V.value!=="")W=V.value;var X=o(q.HAD_CP_PREFILLED),Y=null;if(X!=null&&X.value!=="")Y=X.value;var Z=o(q.HAD_PASSWORD_PREFILLED),$=null;if(Z!=null&&Z.value!=="")$=Z.value;h.create({signal:true}).log("LoginEventsLoggerConfig",{event:O,first_prefill_type:Q,first_prefill_source:S,prefill_type:U,prefill_source:W,had_cp_prefilled:Y,had_password_prefilled:$})},_handleSubmitButtonClick:function N(){this._logActionIfEnabled("clicked_submit");if(this.passwordInputDOM.value==="")this._logActionIfEnabled("clicked_submit_password_blank");else this._logActionIfEnabled("clicked_submit_password_filled");this._sendLoginRequest()},_populateProfileInfo:function N(O){__p&&__p();var P=E.getURIBuilder().setString("contactpoint",this.emailInput.value).getURI();r.ajaxify(null,null,new y(P).setMethod("GET"),null,[{response:function(Q){__p&&__p();this.nextButton.disabled=false;if(!Q.payload){O();return}var R=Q.payload;if(R.profile_pic_elem){var S=this.profilePicElem.parentNode;l.replace(this.profilePicElem,R.profile_pic_elem);this.profilePicElem=l.scry(S,"*",w.PROFILE_PIC_ELEM).pop();this.displayProfilePic=true}if(R.user_name&&this.userName){l.setContent(this.userName,R.user_name||this.emailInput.value);this.displayUserName=true}if(R.otp_uri&&this.oneTimePasswordLink){this.oneTimePasswordLink.setAttribute("href",R.otp_uri);this.displayOTPLink=true}O()}.bind(this)}])},_checkContactPoint:function N(){__p&&__p();var O=D.getURIBuilder().setString("contactpoint",this.emailInput.value).getURI();r.ajaxify(null,null,new y(O).setMethod("POST"),null,[{response:function(P){__p&&__p();this.nextButton.disabled=false;if(!P.payload)return;var Q=P.payload;if(this.emailInput!==null&&Q[w.CONTACTPOINT_EXISTS]===false){if(Q[w.EMAIL_INPUT]&&Q[w.EMAIL_INPUT].error){v.set(this.emailInput,"error");k.set(this.emailInput,"error",true);this.emailInput.value="";this._resetProgressBar()}if(Q[w.NOTICE]){l.setContent(this.notice,Q[w.NOTICE]);j.show(this.notice)}u.popSoftState(J)}else this._goToPasswordStep()}.bind(this)}])},_getBlankEmailErrorFBT:function N(){var O=n._("Reg\u00edstrate para crear una cuenta."),P=l.create("a");P.setAttribute("href",this.onErrorRegURI);l.setContent(P,O);return n._("El correo electr\u00f3nico o el n\u00famero de tel\u00e9fono que has introducido no coinciden con ninguna cuenta. {reg_uri}",[n._param("reg_uri",P)])},_onEnteringCP:function N(){__p&&__p();this._logActionIfEnabled("clicked_next");if(this.emailInput.value.trim()===""&&!this.shouldCallServerOnEmptyCP){this._logActionIfEnabled("clicked_next_user_identifier_blank");l.setContent(this.notice,this._getBlankEmailErrorFBT());j.show(this.notice);v.set(this.emailInput,"error");k.set(this.emailInput,"error",true);u.popSoftState(J);return}if(this.emailInput.value.trim()===""&&this.shouldCallServerOnEmptyCP){this._logActionIfEnabled("clicked_next_user_identifier_blank");this._sendLoginRequest();return}this._logActionIfEnabled("clicked_next_user_identifier_filled");v.unset(this.emailInput);k.set(this.emailInput,"error",false);if(!k.get(this.passwordInput,"error",false))j.hide(this.notice);this.nextButton.disabled=true;this._enableProgressBar();if(this.isEarlyCPCheckEnabled){this._checkContactPoint();return}this._populateProfileInfo(this._goToPasswordStep.bind(this));return},_onBackToCP:function N(){if(k.get(this.passwordInput,"error",false)){j.hide(this.notice);k.set(this.passwordInput,"error",false);j.removeClass(this.passwordInput,G)}this._goToIdentificationStep()},_hideAll:function N(O){O.forEach(function(P){return j.hide(P)})},_showAll:function N(O){O.forEach(function(P){return j.show(P)})},_rerenderAuthStepCPDisplay:function N(){__p&&__p();if(this.displayUserName){if(this.cpText)j.hide(this.cpText);if(this.cpDisplayLabel)j.hide(this.cpDisplayLabel);if(this.userName)j.show(this.userName)}if(this.profilePicElem)j.conditionShow(this.profilePicElem,!!this.displayProfilePic);if(this.oneTimePasswordLink)j.conditionShow(this.oneTimePasswordLink,!!this.displayOTPLink);var O=!this.shouldEnableEditableCPDesign||this.displayUserName||this.displayProfilePic;j.conditionShow(this.stepTwoCPDisplayContainer,!!O);j.conditionShow(this.emailComponentsWrapper,!O)},_showEditableCPFieldOnAuthStep:function N(){this.displayProfilePic=false;this.displayUserName=false;this.displayOTPLink=false;this._rerenderAuthStepCPDisplay();this.emailInput.focus()},_goToPasswordStep:function N(){__p&&__p();k.set(this.loginForm,"step",I);if(this.prefillContactpointHiddenInput.value!==this.emailInput.value)this.passwordInputDOM.value="";if(this.shouldClearPasswordIfOnlyPasswordPrefilled){var O=o(q.HAD_CP_PREFILLED),P=o(q.HAD_PASSWORD_PREFILLED);if(O!=null&&P!=null&&(O.value==null||O.value==="false")&&P.value==="true"){this.shouldClearPasswordIfOnlyPasswordPrefilled=false;this.passwordInputDOM.value=""}}this._hideAll(this.identifyStepElements);this._showAll(this.passwordStepElements);this._logActionIfEnabled("password_entry_viewed");this._rerenderAuthStepCPDisplay();if(this.moreLinks)j.addClass(this.moreLinks,"_2pie");j.removeClass(this.passwordInput,"_1-z5");j.removeClass(this.passwordComponentWrapper,"_1-z5");this.passwordInputDOM.removeAttribute("tabindex");if(this.cpText)l.setContent(this.cpText,this.emailInput.value);this.passwordInputDOM.focus()},_resetProgressBar:function N(){this.progressBar.style.transitionDuration="0ms";this.progressBar.style["-webkit-transition-duration"]="0ms";this.progressBar.style["-moz-transition-duration"]="0ms";this.progressBar.style.transform="translateX(0%)";this.progressBar.style["-webkit-transform"]="translateX(0%)";this.progressBar.style["-moz-transform"]="translateX(0%)"},_enableProgressBar:function N(){this.progressBar.style.transitionDuration=this.passwordStepDelayMilliSeconds+"ms";this.progressBar.style["-webkit-transition-duration"]=this.passwordStepDelayMilliSeconds+"ms";this.progressBar.style["-moz-transition-duration"]=this.passwordStepDelayMilliSeconds+"ms";this.progressBar.style.transform="translateX(100%)";this.progressBar.style["-webkit-transform"]="translateX(100%)";this.progressBar.style["-moz-transform"]="translateX(100%)"},_goToIdentificationStep:function N(){__p&&__p();k.set(this.loginForm,"step",H);this._resetProgressBar();this.displayUserName=false;this.displayProfilePic=false;this.displayOTPLink=false;if(this.cpText)j.show(this.cpText);if(this.cpDisplayLabel)j.show(this.cpDisplayLabel);if(this.userName){l.setContent(this.userName,"");j.hide(this.userName)}j.addClass(this.passwordInput,"_1-z5");j.addClass(this.passwordComponentWrapper,"_1-z5");this.passwordInputDOM.setAttribute("tabindex",-1);this._hideAll(this.passwordStepElements);this._showAll(this.identifyStepElements);if(!k.get(this.emailInput,"error",false))this._logActionIfEnabled("clicked_back");else l.hide(this.upsell);if(this.moreLinks)j.removeClass(this.moreLinks,"_2pie");this.emailInput.focus()},_handleNextButtonClick:function N(){if(this.passwordInputDOM.value.trim()!==""&&this.prefillContactpointHiddenInput&&this.prefillContactpointHiddenInput.value===this.emailInput.value)this.hadCPPrefilled=true;u.pushSoftState(J)},_onLoginResponse:function N(O){__p&&__p();t.setEnabled(this.loginButton,true);if(this.isTwoStepsLogin)t.setEnabled(this.nextButton,true);if(this.loginButtonAlt!==null)t.setEnabled(this.loginButtonAlt,true);if(!O.payload)return;var P=O.payload;if(P[w.PASSWORD_INPUT].error)this.numPasswordErrorAttempts++;else this.numPasswordErrorAttempts=0;if(P[w.EMAIL_INPUT].unrecognized)this.unrecognizedContactpointErrorCount++;if(this.rapidFeedbackUri&&this.numPasswordErrorAttempts==2)p(this.rapidFeedbackUri);if(P[w.NOTICE])if(P[w.CHANGE_NOTICE_BACKGROUND]){l.replace(this.notice,P[w.NOTICE]);this.notice=l.find(this.root,"div",w.NOTICE)}else{l.setContent(this.notice,P[w.NOTICE]);if(this.isTwoStepsLogin&&this.shouldEnableInlineError)if(P[w.EMAIL_INPUT].error)l.insertAfter(this.emailInput,this.notice);else if(P[w.PASSWORD_INPUT].error)l.insertAfter(this.passwordInput,this.notice);j.show(this.notice)}if(this.emailInput!==null){if(P[w.EMAIL_INPUT].error){v.set(this.emailInput,"error");k.set(this.emailInput,"error",true);if(this.isTwoStepsLogin&&!this.shouldEnableEditableCPDesign)u.popSoftState(J)}else{v.unset(this.emailInput);k.set(this.emailInput,"error",false)}var Q=P[w.EMAIL_INPUT].value;if(Q){this.emailInput.value=Q;if(this.isTwoStepsLogin&&this.cpText)l.setContent(this.cpText,Q)}else this.emailInput.value=""}if(this.passwordInput!==null){l.find(this.passwordInput,"input").value="";B.invoke("m:passwordinput:autoclear",x.INPUT);if(P[w.PASSWORD_INPUT].error){k.set(this.passwordInput,"error",true);j.addClass(this.passwordInput,G);if(this.isTwoStepsLogin&&k.get(this.loginForm,"step","")===H)u.pushSoftState(J);if(this.shouldEnableEditableCPDesign)this._populateProfileInfo(this._rerenderAuthStepCPDisplay.bind(this))}else{k.set(this.passwordInput,"error",false);j.removeClass(this.passwordInput,G)}}this._autoFocusIfNeeded(O.payload);if(this.upsell!==null)l.hide(this.upsell)},_onLoginFromRegResponse:function N(O){p(this.regURI)},redirect:function N(O){window.location.replace(O)}};f.exports=M}),null);
__d("MLoginView",["DOM","DeferredCookie","MButton","ge","CSS","cx"],(function a(b,c,d,e,f,g,h,i,j,k,l,m){var n={disableOnSubmit:function o(p,q){h.listen(p,"submit",null,function(){i.flushAllCookies();j.setEnabled(q,false);setTimeout(j.setEnabled.bind(null,q,true),15e3)})},showForm:function o(p,q){h.listen(p,"click",null,function(r){h.remove(p);l.removeClass(q,"_7tb")})}};f.exports=n}),null);
__d("MPasswordPlainTextToggle",["CSS","MPasswordPlainTextToggleSigils","Stratcom","invariant"],(function a(b,c,d,e,f,g,h,i,j,k){"use strict";__p&&__p();var l={init:function m(n,o,p,q){__p&&__p();p!==null&&q!==null||k(0);j.listen("click",i.TOGGLE,function(r){__p&&__p();if(n.type=="password"){n.type="text";h.hide(p);h.show(q)}else{n.type="password";h.hide(q);h.show(p)}r.kill()});j.listen(["m:passwordinput:autoclear","input"],i.INPUT,function(r){if(n.value=="")h.hide(o);else h.show(o)})}};f.exports=l}),null);
__d("BrowserPushMessageRedirectUtil",[],(function a(b,c,d,e,f,g){var h=function h(i){return true};f.exports=h}),null);
__d("BrowserPushCommands",[],(function a(b,c,d,e,f,g){var h="browser_push_ack",i="browser_push_redirect",j="browser_push_window_visible",k={ACK:h,REDIRECT:i,WINDOW_VISIBLE:j};f.exports=k}),null);
__d("BrowserPushMessageHandler",["BrowserPushCommands","BrowserPushMessageRedirectUtil","EventListener","URI","URISchemes","isFacebookURI"],(function a(b,c,d,e,f,g,h,i,j,k,l,m){__p&&__p();function n(event){__p&&__p();if(event.data.command&&event.data.command===h.REDIRECT){if(window.onbeforeunload()===undefined)event.ports[0].postMessage({command:h.ACK,success:true});else{event.ports[0].postMessage({command:h.ACK,success:false});return}var p=event.data.uri;if(/^([^.:/?#]+):/.test(p)&&!l.isAllowed(/^([^.:/?#]+):/.exec(p)[1])||!m(new k(p)))throw new Error("goURI: URI scheme rejected, URI: "+p);if(i(p))window.location.href=p}}var o={registerRedirectHandler:function p(){j.listen(window,"message",function(event){if(event.origin==="")n(event)});if(navigator.serviceWorker&&navigator.serviceWorker.addEventListener)navigator.serviceWorker.addEventListener("message",function(event){if(navigator.serviceWorker&&navigator.serviceWorker.controller&&event.target&&event.target.controller&&event.target.controller===navigator.serviceWorker.controller||new RegExp("^"+window.location.protocol+"//"+window.location.host+"$").test(event.origin))n(event)})}};f.exports=o}),null);
__d("BrowserPushMuteOptions",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({ZERO:0,FIFTEEN_MINUTES:900,THIRTY_MINUTES:1800,FORTY_FIVE_MINUTES:2700,ONE_HOUR:3600,TWO_HOURS:7200,EIGHT_HOURS:28800,ONE_DAY:86400})}),null);
__d("BrowserPushVisibilityChanger",["BrowserPushCommands","ClientServiceWorkerMessage","Visibility"],(function a(b,c,d,e,f,g,h,i,j){function k(){new i(h.WINDOW_VISIBLE,null).sendViaController()}var l={listenForVisibility:function m(){if(!j.isHidden())k();j.addListener(j.VISIBLE,k)}};f.exports=l}),null);
__d("XAsyncPushMuteController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/notifications/settings/push/mute/",{appid:{type:"Int",required:true},push_endpoint:{type:"String",required:true},mute_for:{type:"Enum",enumType:0}})}),null);
__d("XAsyncPushMuteStateController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/notifications/settings/push/mute/state/",{appid:{type:"Int",required:true},push_endpoint:{type:"String",required:true}})}),null);
__d("PushRegistration",["Promise","BrowserPushMessageHandler","BrowserPushMuteOptions","BrowserPushVisibilityChanger","ServiceWorkerRegistration","XAsyncPushMuteController","XAsyncPushMuteStateController","emptyFunction"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){__p&&__p();var p=window.Notification,q=new Map();r.get=function(s,t){"use strict";if(q.has(t))return q.get(t);var u=new r(s,t);q.set(t,u);return u};function r(s,t){"use strict";this.$PushRegistration3=s;this.appID=t;if(!r.$PushRegistration1&&!r.$PushRegistration2){r.$PushRegistration1=false;r.$PushRegistration2=false}}r.prototype.getPushSubscription=function(){"use strict";__p&&__p();return new h(function(s,t){if(r.pushPermissionIsDenied())t(new Error("No permission or not supported"));l.getWorkerRegistration(this.$PushRegistration3).then(function(u){if(!u){s(null);return}u.pushManager.getSubscription().then(function(v){s(v)})["catch"](t)})["catch"](t)}.bind(this))};r.prototype.$PushRegistration4=function(s){"use strict";var t=s.endpoint;if("subscriptionId"in s&&!new RegExp("/"+s.subscriptionId+"$").test(t))t+="/"+s.subscriptionId;return t};r.prototype.$PushRegistration5=function(s,t,u,v){"use strict";__p&&__p();var w=this.$PushRegistration4(u),x=s.getURIBuilder().getURI(),y=new t(x),z=null;if(u.toJSON)z=u.toJSON().keys;else if(u.keys)z=u.keys;y.setData({app_id:this.appID,push_endpoint:w,subscription_keys:JSON.stringify(z)});y.setMethod("post");if(y.setHandler)y.setHandler(function(A){if(A.payload&&A.payload.session_change)v()});y.send()};r.prototype.getMutedUntilInServer=function(s){"use strict";__p&&__p();return new h(function(t,u){this.getPushSubscription().then(function(v){if(v){var w=this.$PushRegistration4(v),x=n.getURIBuilder().setString("push_endpoint",w).setInt("appid",this.appID).getURI(),y=new s(x);y.listen("done",function(z){t(z.payload.muteUntilTimestampSec)});y.send()}else u("cannot check mute status for unsubscribed endpoint")}.bind(this))["catch"](u)}.bind(this))};r.prototype.muteNotifications=function(s,t){"use strict";__p&&__p();return new h(function(u,v){__p&&__p();this.getPushSubscription().then(function(w){__p&&__p();if(w){var x=this.$PushRegistration4(w),y=m.getURIBuilder().setEnum("mute_for",s).setString("push_endpoint",x).setInt("appid",this.appID).getURI(),z=new t(y);z.setMethod("POST");z.listen("done",function(A){if(s!==j.ZERO&&A.payload.muteUntilTimestampSec===0)v("operation failed in server");else u(A.payload.muteUntilTimestampSec)});z.send()}else v("no subscription found")}.bind(this))["catch"](v)}.bind(this))};r.prototype.getSubscription=function(){"use strict";return new h(function(s,t){this.getPushSubscription().then(function(u){if(u)s(this.$PushRegistration4(u));else s(null)}.bind(this))["catch"](t)}.bind(this))};r.prototype.maybeRegisterPushAgain=function(s,t,u){"use strict";return new h(function(v,w){this.getPushSubscription().then(function(x){if(x){this.$PushRegistration5(s,t,x,u);v(this.$PushRegistration4(x))}else v(null)}.bind(this))["catch"](function(){v(null)})}.bind(this))};r.prototype.$PushRegistration6=function(s,t,u){"use strict";__p&&__p();return new h(function(v,w){__p&&__p();if(r.$PushRegistration2&&!u){w(new Error("sending disable info already"));return}r.$PushRegistration2=true;var x=s.getURIBuilder().getURI(),y=new t(x.toString());y.setData({appid:this.appID,from_browser_settings:u});y.setMethod("post");if(y.listen){y.listen("finally",v);y.listen("fail",function(){r.$PushRegistration2=false;w()})}else if(y.setErrorHandler&&y.setHandler){y.setErrorHandler(function(){r.$PushRegistration2=false;w()});y.setHandler(v)}else v();y.send()}.bind(this))};r.prototype.isPushRegistered=function(s,t,u,v){__p&&__p();var w=arguments.length<=4||arguments[4]===undefined?false:arguments[4],x=arguments.length<=5||arguments[5]===undefined?o:arguments[5],y=arguments.length<=6||arguments[6]===undefined?false:arguments[6];"use strict";i.registerRedirectHandler();return new h(function(z,A){__p&&__p();this.getPushSubscription().then(function(B){z(!!B||s&&!r.pushPermissionIsPending());if(B)if(w)self.$PushRegistration5(t,v,x,y);else k.listenForVisibility();else if(!B&&s)if(r.pushPermissionIsOn())this.registerPush(t,v,x,y)["catch"](function(){});else this.$PushRegistration6(u,v,false)}.bind(this))["catch"](function(){if(s)this.$PushRegistration6(u,v,false);if(y)l.unregisterControllingWorker();A()}.bind(this))}.bind(this))};r.prototype.$PushRegistration7=function(){"use strict";return new h(function(s,t){p.requestPermission(s)})};r.prototype.registerPushAndWaitForEndpoint=function(s,t,u,v){"use strict";return new h(function(w,x){this.$PushRegistration8(s,t,u,true,null,v).then(function(y){if(typeof y!=="string"){x(new Error("registerPushImpl did not return an endpoint"));return}w(y)})["catch"](x)}.bind(this))};r.prototype.registerPushOnKaiOS=function(s,t,u){"use strict";return new h(function(v,w){u.waitForKaiOS().done(function(){u.registerPush(function(x){var y=JSON.parse(x.get("push_endpoint"));this.$PushRegistration5(s,t,y,o);v(this.$PushRegistration4(y))}.bind(this))}.bind(this))}.bind(this))};r.prototype.registerPush=function(s,t){var u=arguments.length<=2||arguments[2]===undefined?o:arguments[2],v=arguments.length<=3||arguments[3]===undefined?false:arguments[3];"use strict";return this.registerPushWithFinishedCallBack(s,t,u,null,v)};r.prototype.registerPushWithFinishedCallBack=function(s,t,u,v,w){"use strict";return new h(function(x,y){this.$PushRegistration8(s,t,u,false,v,w).then(function(z){if(typeof z!=="boolean"){y(new Error("registerPushImpl did not return a boolean"));return}x(z)})["catch"](y)}.bind(this))};r.prototype.$PushRegistration8=function(s,t,u,v,w,x){"use strict";__p&&__p();if(r.$PushRegistration1)return new h(function(y,z){z(new Error("registering already"))});if(!self.PushManager)return h.reject(new Error("PushManager not found."));r.$PushRegistration1=true;return new h(function(y,z){__p&&__p();var A=l.registerWorkerIfUnregistered(this.$PushRegistration3),B=this.$PushRegistration7();h.all([A,B]).then(function(C){__p&&__p();var D=C[0];if(!r.pushPermissionIsOn()){if(x)D.unregister();throw new Error("Push permission was denied")}if(!v)y(true);D.pushManager.subscribe({userVisibleOnly:true}).then(function(E){if(v)y(this.$PushRegistration4(E));this.$PushRegistration5(s,t,E,u);if(w)w();k.listenForVisibility()}.bind(this))["catch"](function(E){r.$PushRegistration1=false;if(x)D.unregister();z(E)})}.bind(this))["catch"](function(C){r.$PushRegistration1=false;z(C)})}.bind(this))};r.prototype.unregisterPushAndSWOnKaiOS=function(s,t,u,v){"use strict";return new h(function(w,x){this.$PushRegistration6(s,t,v).then(function(){u.unregisterPush();w()})["catch"](x)}.bind(this))};r.prototype.unregisterPushAndSW=function(s,t){"use strict";return new h(function(u,v){this.$PushRegistration6(s,t,true).then(function(){l.unregisterControllingWorker().done(u)})["catch"](v)}.bind(this))};r.prototype.unregisterPushOnly=function(s,t){"use strict";return new h(function(u,v){this.getPushSubscription().then(function(w){if(w)w.unsubscribe().then(this.$PushRegistration6(s,t,true)).then(function(){u(true)})["catch"](v);else v()}.bind(this))["catch"](v)}.bind(this))};r.pushPermissionIsPending=function(){"use strict";return window.Notification&&window.Notification.permission==="default"};r.pushPermissionIsOn=function(){"use strict";return window.Notification&&window.Notification.permission==="granted"};r.pushPermissionIsDenied=function(){"use strict";return window.Notification&&window.Notification.permission==="denied"};f.exports=r}),null);
__d("ServiceWorkerLoginAndLogout",["ClientServiceWorkerMessage"],(function a(b,c,d,e,f,g,h){function i(k){new h(k,null).sendViaController()}var j={login:function k(){i("login")},logout:function k(){i("logout")}};f.exports=j}),null);
__d("XBrowserPushDisabledController",["XController"],(function a(b,c,d,e,f,g){f.exports=c("XController").create("/notifications/client/push/disabled/",{})}),null);
__d("ServiceWorkerLoginAndLogoutListener",["KaiOSController","MobileAppDetect","MRequest","PushRegistration","Stratcom","ServiceWorkerLoginAndLogout","XBrowserPushDisabledController"],(function a(b,c,d,e,f,g,h,i,j,k,l,m,n){__p&&__p();var o={listen:function p(q,r,s,t){__p&&__p();l.listen("click",q,function(){__p&&__p();if(i.is_kaios){if(!t)return;var u=k.get(s,t);u.unregisterPushAndSWOnKaiOS(n,j,h,false)}else if(r==="login")m.login();else if(r==="logout")m.logout();else throw new Error("bad login type given")})}};f.exports=o}),null);